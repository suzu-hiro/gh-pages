<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="733px" preserveAspectRatio="none" style="width:654px;height:733px;" version="1.1" viewBox="0 0 654 733" width="654px" zoomAndPan="magnify"><defs><filter height="300%" id="fjmef2e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="104.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="161" y="160.3125"/><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="292" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="161" y="367.2578"/><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="571.6484" style="stroke: #000000; stroke-width: 2.0;" width="619" x="12" y="79.6094"/><rect fill="#FFFFFF" height="378.5391" style="stroke: none; stroke-width: 1.0;" width="619" x="12" y="272.7188"/><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="231.2969" style="stroke: #000000; stroke-width: 2.0;" width="498" x="119" y="412.9609"/><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="94.8906" style="stroke: #000000; stroke-width: 2.0;" width="381" x="129" y="512.0156"/><rect fill="#FFFFFF" height="46.1875" style="stroke: none; stroke-width: 1.0;" width="381" x="129" y="560.7188"/><rect fill="#CCEEFF" height="726.8672" style="stroke: #A80036; stroke-width: 1.0;" width="147" x="506" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="557" y="17.4951">Internet</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="64" x2="64" y1="62.6094" y2="668.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="166" x2="166" y1="62.6094" y2="668.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="482" x2="482" y1="62.6094" y2="668.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="579" x2="579" y1="62.6094" y2="668.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="47" y="59.5332">cron</text><ellipse cx="64" cy="29" fill="#FEFECE" filter="url(#fjmef2e)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="60,17,66,12,64,17,66,22,60,17" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="47" y="681.791">cron</text><ellipse cx="64" cy="700.8672" fill="#FEFECE" filter="url(#fjmef2e)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="60,688.8672,66,683.8672,64,688.8672,66,693.8672,60,688.8672" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fjmef2e)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="139" y="26"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="146" y="47.5332">Batch</text><rect fill="#FEFECE" filter="url(#fjmef2e)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="139" y="667.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="146" y="688.791">Batch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="469.5" y="59.5332">DB</text><path d="M464,13 C464,3 482,3 482,3 C482,3 500,3 500,13 L500,35 C500,45 482,45 482,45 C482,45 464,45 464,35 L464,13 " fill="#FEFECE" filter="url(#fjmef2e)" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M464,13 C464,23 482,23 482,23 C482,23 500,23 500,13 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="469.5" y="681.791">DB</text><path d="M464,694.8672 C464,684.8672 482,684.8672 482,684.8672 C482,684.8672 500,684.8672 500,694.8672 L500,716.8672 C500,726.8672 482,726.8672 482,726.8672 C482,726.8672 464,726.8672 464,716.8672 L464,694.8672 " fill="#FEFECE" filter="url(#fjmef2e)" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M464,694.8672 C464,704.8672 482,704.8672 482,704.8672 C482,704.8672 500,704.8672 500,694.8672 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#CCCCFF" filter="url(#fjmef2e)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="552" y="26"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="559" y="47.5332">Tdnet</text><rect fill="#CCCCFF" filter="url(#fjmef2e)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="552" y="667.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="559" y="688.791">Tdnet</text><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="104.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="161" y="160.3125"/><rect fill="#FFFFFF" filter="url(#fjmef2e)" height="292" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="161" y="367.2578"/><rect fill="none" height="571.6484" style="stroke: #000000; stroke-width: 2.0;" width="619" x="12" y="79.6094"/><polygon fill="#EEEEEE" points="12,79.6094,78,79.6094,78,87.6094,68,97.6094,12,97.6094,12,79.6094" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="27" y="94.1045">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="93" y="93.0283">[cronで定期的に実行]</text><polygon fill="#FBFB77" filter="url(#fjmef2e)" points="44,102.9609,44,128.9609,599,128.9609,599,112.9609,589,102.9609,44,102.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="102.9609" y2="112.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="589" y1="112.9609" y2="112.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="436" x="97" y="121.4561">TdnetからHTMLを取得しxbrlのURLを抽出して、Queueテーブルに保存する</text><polygon fill="#A80036" points="149,156.3125,159,160.3125,149,164.3125,153,160.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="155" y1="160.3125" y2="160.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="71" y="155.8076">定期的に起動</text><polygon fill="#A80036" points="567.5,186.6641,577.5,190.6641,567.5,194.6641,571.5,190.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="573.5" y1="190.6641" y2="190.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="178" y="186.1592">HTML取得</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="213" y1="221.3672" y2="221.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="213" y1="221.3672" y2="234.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="172" x2="213" y1="234.3672" y2="234.3672"/><polygon fill="#A80036" points="182,230.3672,172,234.3672,182,238.3672,178,234.3672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="178" y="216.5107">xbrlのurl一覧抽出</text><polygon fill="#A80036" points="470,260.3672,480,264.3672,470,268.3672,474,264.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166" x2="476" y1="264.3672" y2="264.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="173" y="259.8623">Queueテーブル保存</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="12" x2="631" y1="273.7188" y2="273.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="17" y="285.1377">[cronで定期的に実行]</text><polygon fill="#FBFB77" filter="url(#fjmef2e)" points="22,293.5547,22,335.5547,617,335.5547,617,303.5547,607,293.5547,22,293.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607" x2="607" y1="293.5547" y2="303.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="617" x2="607" y1="303.5547" y2="303.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="574" x="28" y="312.0498">xbrlを1件ずつ処理すると時間がかかるため残データがあっても、レンタルサーバーの制約により、</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="28" y="328.4014">30秒経過したら処理を終了する</text><polygon fill="#A80036" points="149,363.2578,159,367.2578,149,371.2578,153,367.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="155" y1="367.2578" y2="367.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="71" y="362.7529">定期的に起動</text><polygon fill="#A80036" points="470,393.6094,480,397.6094,470,401.6094,474,397.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="476" y1="397.6094" y2="397.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="178" y="393.1045">Queueテーブルから 未処理のxbrlのURL一覧取得</text><rect fill="none" height="231.2969" style="stroke: #000000; stroke-width: 2.0;" width="498" x="119" y="412.9609"/><polygon fill="#EEEEEE" points="119,412.9609,192,412.9609,192,420.9609,182,430.9609,119,430.9609,119,412.9609" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="134" y="427.4561">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="207" y="426.3799">[xbrlのURL一覧 ： 30秒以内]</text><polygon fill="#A80036" points="567.5,449.3125,577.5,453.3125,567.5,457.3125,571.5,453.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="573.5" y1="453.3125" y2="453.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="178" y="448.8076">get xbrlファイル（zip形式）</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="213" y1="484.0156" y2="484.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="213" y1="484.0156" y2="497.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="172" x2="213" y1="497.0156" y2="497.0156"/><polygon fill="#A80036" points="182,493.0156,172,497.0156,182,501.0156,178,497.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="178" y="479.1592">データ変換（xbrl(xml)を、phpのオブジェクトに）</text><rect fill="none" height="94.8906" style="stroke: #000000; stroke-width: 2.0;" width="381" x="129" y="512.0156"/><polygon fill="#EEEEEE" points="129,512.0156,190,512.0156,190,520.0156,180,530.0156,129,530.0156,129,512.0156" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="144" y="526.5107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="205" y="525.4346">[決算短信]</text><polygon fill="#A80036" points="470,548.3672,480,552.3672,470,556.3672,474,552.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="476" y1="552.3672" y2="552.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="178" y="547.8623">決算テーブル insert</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="129" x2="510" y1="561.7188" y2="561.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="134" y="573.1377">[業績予想修正]</text><polygon fill="#A80036" points="470,594.5547,480,598.5547,470,602.5547,474,598.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="476" y1="598.5547" y2="598.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="178" y="594.0498">予想テーブル insert</text><polygon fill="#A80036" points="470,631.9063,480,635.9063,470,639.9063,474,635.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="476" y1="635.9063" y2="635.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="178" y="631.4014">Queueテーブル 処理済み update</text></g></svg>